jQuery(document).ready(function(e){e.ajax({method:"GET",url:"https://anaplan.staging.wpengine.com/wp-content/plugins/anaplan-nav-menu-json/assets/public/anaplan-main-menu.json",dataType:"json"}).done(function(n){var a=e("#site-footer"),i=[],s=[];a.hasClass("site-footer")||a.addClass("site-footer"),e.each(n,function(n,a){var u=function(e,n){this.markup=e,this.order=n},r="<div class='col-sm-6 col-md-2'><h3>${menu-name}</h3><div class='menu-home-container'><ul id='menu-home-${key}' class='menu'>${menu-li}</ul></div></div>";if(/footer/gi.test(a.menu_name)){var l=a.menu_name,t=l.substr(l.indexOf("_")+1,l.indexOf("--")-l.indexOf("_")-1),c=parseInt(l.substr(l.indexOf("--")+2,l.length));r=(r=r.replace(/\$\{menu-name\}/gi,t)).replace(/\$\{key\}/gi,c),e.each(a.menu,function(n,a){var i="";e.each(a,function(e,n){i+="<li class='menu'><a href='"+n.url+"'>"+n.name+"</a></li>"}),r=r.replace(/\$\{menu\-li\}/gi,i)});var o=new u(r,c);i.push(o)}else if("Main Nav"===a.menu_name){var m="<ul id='primary-menu' class='menu'>${navMarkupLi}</ul>";e.each(a.menu,function(n,a){e.each(a,function(e,n){console.log(n);var a=n.classes.substr(n.classes.indexOf("jet-menu-"),n.classes.length).replace("jet-menu","sub-menu");a=(a=a.replace(/\,/gi," ")).indexOf("left")>0?"sub-menu-50 "+a:a;var i=n.order,r=void 0!==n.children,l=r?"sub-menu-dropdown menu-item "+a:"menu-item",t=r?" <i style='display:inline-block;' class='fa fa-chevron-down'></i>":"",c="<a href='${href}'>${title}${chevron}</a>";c=(c=(c=c.replace(/\$\{href\}/gi,n.url)).replace(/\$\{title\}/gi,n.name)).replace(/\$\{chevron\}/gi,t);var o,m,h,p="<li class='${classes}'>${anchor}${submenu}</li>";if(p=(p=(p=p.replace(/\$\{key\}/gi,e)).replace(/\$\{classes\}/gi,l)).replace(/\$\{anchor\}/gi,c),!0===r){var f="<ul class='sub-menu' style='max-height:0;'>${submenu}</ul>",d=(o=n.children,m=[],(h=function(e){if(e<o.length){var n=function(e){var n=[],a=/(\.png)|(\.jpg)|(img)/gi,i=!1,s=function(u){if(u<e.length){if(a.test(e[u].url)){var r="<li class='submenu-img menu-item'>${img}</li>",l="<img src='${src}' alt='${alt}'/>";l=(l=l.replace(/\$\{src\}/gi,e[u].url)).replace(/\$\{alt\}/gi,e[u].name.replace("img","")),r=r.replace(/\$\{img\}/gi,l),i=!0}else{r=i?"<li class='sub-menu-button menu-item'>${anchor}</li>":"<li class='menu-item'>${anchor}</li>";var t="<a href='${href}'>${title}</a>";t=(t=t.replace(/\$\{href\}/gi,e[u].url)).replace(/\$\{title\}/gi,e[u].name),r=r.replace(/\$\{anchor\}/gi,t),!0===i&&(i=!1)}n.push(r),s(++u)}};return s(0),n.join("")}(o[e].sub_children),a=f.replace(/\$\{submenu\}/gi,n),i="<li class='sub-menu-title menu-item'>${anchor}${submenuChildren}</li>",s="<a href='${href}'>${title}</a>";s=(s=s.replace(/\$\{href\}/gi,o[e].url)).replace(/\$\{title\}/gi,o[e].name),i=(i=i.replace(/\$\{anchor\}/gi,s)).replace(/\$\{submenuChildren\}/gi,a),m.push(i),h(++e)}})(0),m.join(""));p=p.replace(/\$\{submenu\}/gi,f.replace(/\$\{submenu\}/gi,d))}else p=p.replace(/\$\{submenu\}/gi,"");var g=new u(p,i);s.push(g)})});var h="",p=s.sort(function(e,n){return e.order-n.order});e.each(p,function(e,n){h+=n.markup}),m=m.replace(/\$\{navMarkupLi\}/gi,h),e("#site-navigation").html(""),e("<div/>",{html:m,class:"menu-main-menu-container"}).appendTo(e("#site-navigation"))}});var u=i.sort(function(e,n){return e.order-n.order}),r="";e.each(u,function(e,n){r+=n.markup}),e("#site-footer").html(""),e("<div/>",{html:r,class:"row"}).appendTo(a)}).fail(function(e,n){console.log("Error: File failed to load.\n\ntextStatus = "+n)}),e(document).on("mouseover",".sub-menu-dropdown",function(n){var a=e(this).children(".sub-menu"),i=parseInt(a.css("width"));if(a.css("max-height","500px"),!1===a.hasClass("left-update")){var s=parseInt(e(this).position().left-i/2);console.log(s),a.css("left",s),a.addClass("left-update")}}),e(document).on("mouseout",".sub-menu-dropdown",function(n){e(this).find(".sub-menu").css("max-height","0")}),e(document).on("mouseover",".sub-menu",function(n){e(this).css("max-height","500px")}),e(document).on("mouseout",".sub-menu",function(n){e(this).css("max-height","500px")})});